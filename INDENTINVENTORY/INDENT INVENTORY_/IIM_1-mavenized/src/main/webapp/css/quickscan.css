/* ========== Quick Scan — White Background ========== */

/* Tokens */
:root{
  --bg:#ffffff;       /* page background white */
  --frame:#ffffff;    /* frame/panel background also white */
  --btn:#94765e;
  --ink:#1f1f1e;
  --ink-strong:#463a31;
  --ink-dim:#6a6a66;
  --divider:#ece7d3;
  --shadow:0 14px 38px rgba(35,55,15,.10), 0 6px 18px rgba(0,0,0,.06);
  --shadow-sm:0 2px 6px rgba(0,0,0,.08);
  --r-lg:18px;
  --easing:cubic-bezier(.4,.1,.2,1);
  --beige-1:#f9f5ef;
}

/* Reset */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  overflow-x:hidden;
}

/* Fit-to-page */
.main{
  height:var(--main-h,100vh);
  min-height:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  gap:10px;
  padding:10px 12px 0;
}

/* Title */
.quickscan-title{
  margin:4px 0 6px;
  font-family:"Fraunces",serif;
  font-weight:900;
  letter-spacing:.01em;
  font-size:clamp(24px,3.0vw,36px);
  line-height:1.04;
  color:var(--ink-strong);
  text-align:center;
}

/* Panel */
.qs-panel{
  width:min(1100px,92vw);
  background:#ffffff;
  border:1px solid var(--divider);
  border-radius:var(--r-lg);
  box-shadow:var(--shadow);
  padding:18px 18px 12px;
  display:flex;
  flex-direction:column;
  min-height:0;
}

/* Form */
.qs-form{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px 18px;
  align-items:end;
  margin-bottom:8px;
}
.qs-field{
  position:relative;
  display:grid;
  grid-template-rows:auto 44px;
  gap:6px;
}
.qs-label{
  font-size:12.5px;
  font-weight:800;
  color:var(--ink-dim);
  letter-spacing:.02em;
}

/* Inputs */
.qs-input, .qs-select{
  border:none; outline:none; background:transparent;
  padding:10px 2px 10px;
  font-size:15px; color:var(--ink);
  border-bottom:2px solid rgba(50,29,11,.14);
  transition:border-color .22s var(--easing), background .18s var(--easing), transform .18s var(--easing);
  height:44px; line-height:22px; margin:0;
}
.qs-input::placeholder{ color:rgba(60,58,55,.55) }
.qs-input:focus, .qs-select:focus{
  border-bottom-color:var(--ink-strong);
  background:rgba(148,126,108,.06);
  transform:translateY(-1px);
}
input[type="date"].qs-input{ appearance:none; -webkit-appearance:none }

/* Scanner sink */
.scan-sink{
  position:absolute; left:-99999px; width:1px; height:1px; opacity:0; border:0; padding:0; margin:0; background:transparent; caret-color:transparent;
}
.scan-wrap{ grid-column:1 / -1; display:flex; align-items:center; gap:10px; padding:2px 0 0; }
.scan-hint{ font-size:12px; color:var(--ink-dim); white-space:nowrap; }

/* Items */
.items-card{
  display:flex;
  flex-direction:column;
  min-height:0;
  margin-top:2px;
}
.items-head{
  display:flex; justify-content:space-between; align-items:center;
  margin:6px 0 6px;
  color:var(--ink-strong); font-weight:900;
}

/* Add manually */
.add-manual{
  font-size:12px; font-weight:800; color:var(--ink-strong);
  background:var(--beige-1);
  border:1px dashed #d9cdbd;
  padding:9px 14px; border-radius:999px; cursor:pointer;
  transition:filter .15s var(--easing), transform .12s var(--easing), box-shadow .15s var(--easing);
  box-shadow:var(--shadow-sm);
}
.add-manual:hover{ filter:brightness(1.04) }
.add-manual:active{ transform:translateY(1px) }

/* List head/body */
.list-head,
.item-row{
  display:grid;
  grid-template-columns: 160px 1fr 180px 34px;
  gap:12px; align-items:center;
}
.list-head{
  padding:8px 0 6px;
  border-top:1px solid var(--divider);
  border-bottom:1px solid var(--divider);
  color:var(--ink); font-weight:900; font-size:14px;
}
.list-head .right{ text-align:right; padding-right:8px; }

.list-body{
  overflow:auto;
  max-height: calc(var(--main-h, 70vh) - 30px - 48px - 120px - 72px - 56px);
  min-height: 120px;
}

/* Rows */
.item-row{ padding:10px 0; border-bottom:1px dashed var(--divider) }
.item-row:last-child{ border-bottom:none }

/* Columns */
.code{
  font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
  font-size:13px; letter-spacing:.2px; color:#5b4e43;
}
.name{ font-weight:900; color:#463a31; }
.qty-box{ display:flex; align-items:center; justify-content:flex-end; gap:8px; }

/* Qty */
.qty-btn{
  width:32px; height:32px;
  display:inline-flex; align-items:center; justify-content:center;
  border-radius:10px; border:1px solid var(--divider);
  background:#fff; cursor:pointer; font-size:16px; line-height:1;
  transition:filter .12s var(--easing), transform .06s var(--easing);
}
.qty-btn:hover{ filter:brightness(1.06) }
.qty-btn:active{ transform:translateY(1px) }

.qty-input{
  width:74px; text-align:center;
  border:none; background:transparent;
  border-bottom:2px solid rgba(50,29,11,.14);
  font-size:14px; padding:4px 2px 6px; color:var(--ink-strong);
}
.qty-input:focus{ border-bottom-color:var(--ink-strong); outline:none }

/* Remove */
.remove-row{
  width:32px; height:32px; border-radius:10px;
  border:1px solid var(--divider);
  background:#fff; cursor:pointer; font-size:18px; line-height:1;
  transition:filter .12s var(--easing), transform .06s var(--easing);
}
.remove-row:hover{ filter:brightness(1.06) }
.remove-row:active{ transform:translateY(1px) }

/* Footer */
.items-footer{
  display:flex; justify-content:space-between; align-items:center;
  padding:10px 0 2px; margin-top:6px;
  border-top:1px solid var(--divider);
}
.total{ font-weight:900; font-size:16px; color:var(--ink-strong) }
.actions{ display:flex; gap:10px }
.btn{ height:40px; padding:0 20px; font-weight:900; border-radius:999px; }
.btn-primary{ background:var(--btn); color:#fff; }
.btn-alt{
  color:var(--ink-strong);
  background:var(--beige-1);
  border:1px dashed #d9cdbd;
}

/* Modal (shared) */
.modal{ position:fixed; inset:0; display:none; place-items:center; background:rgba(0,0,0,.18); z-index:1000 }
.modal.open{ display:grid }
.modal-card{
  width:min(560px,94vw); background:var(--frame);
  border:1px solid var(--divider); border-radius:18px;
  padding:18px; box-shadow:var(--shadow);
}
.modal-title{ font-weight:900; margin:0 0 8px; color:var(--ink-strong) }
.modal-row{ display:flex; gap:10px; align-items:center; margin:10px 0 }
#m_suggestions{ max-height:210px; overflow:auto }
.m-chip{
  cursor:pointer; user-select:none;
  font-size:12px; padding:6px 10px; border-radius:999px;
  background:var(--beige-1); border:1px dashed #d9cdbd; color:#5a4a3e;
}
.m-chip:hover{ filter:brightness(1.05) }
.m-chip.active{ outline:2px solid #d9cdbd; filter:brightness(1.05) }

/* Department dropdown */
.dropdown{ position:absolute; left:0; right:0; top:calc(100% + 6px); z-index:20 }
.dept-menu{
  background:#fff; border:1px solid var(--divider); border-radius:12px;
  box-shadow:var(--shadow); max-height:260px; overflow:auto; display:none
}
.dept-item{ padding:10px 12px; cursor:pointer; font-size:14px; color:#3f342c }
.dept-item:hover, .dept-item.active{ background:rgba(148,118,94,.08) }
.dept-muted{ color:#928579; font-size:12px }

/* Empty */
#list:empty::before{
  content:"Scan a barcode to add items…";
  display:block; color:#9a8d81; font-size:14px; padding:12px 4px;
}

/* ===== Mode popup header ===== */
.mode-header {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  margin-bottom: 6px;
}

.back-link {
  border: none;
  background: transparent;
  font-size: 14px;
  font-weight: 700;
  color: var(--ink-strong);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: color .2s var(--easing);
}
.back-link:hover { color: var(--btn); }

/* Centered title */
.mode-center {
  text-align: center;
  margin: 0 0 12px;
  font-size: 20px;
  font-weight: 900;
  color: var(--ink-strong);
}

/* ===== Mode Picker (Issue / Restock) ===== */
.mode-modal .modal-card{ width:min(520px,92vw) }
.mode-grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:8px }
.mode-btn{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:8px; text-align:center; padding:18px 12px; border-radius:16px; cursor:pointer;
  border:1px solid var(--divider); background:#fff; box-shadow:var(--shadow-sm);
  transition:transform .12s var(--easing), box-shadow .12s var(--easing), filter .12s var(--easing);
  font-weight:900; color:var(--ink-strong);
}
.mode-btn:hover{ filter:brightness(1.03) }
.mode-btn:active{ transform:translateY(1px) }
.mode-btn .icon{ font-size:26px }

/* Friendly footer note */
.mode-note{
  font-size:12.5px;
  color:var(--ink-dim);
  margin-top:10px;
  text-align:center;
  font-style:italic;
}

/* Responsive */
@media (max-width:1024px){
  .list-head, .item-row{ grid-template-columns:140px 1fr 170px 34px }
}
@media (max-width:900px){
  .qs-form{ grid-template-columns:1fr }
}
@media (max-width:560px){
  .list-head, .item-row{ grid-template-columns:1fr 130px 30px }
  .list-head > :first-child, .code{ display:none }
  .qty-input{ width:64px }
}
